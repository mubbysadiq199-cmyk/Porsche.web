<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>911 Collections — Slideshow</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;600&family=Teko:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  :root{ --bg:#000; --txt:#fff; --gold:#d4af37; --muted:rgba(255,255,255,.7) }
  *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--txt);font-family:Sora,system-ui}
  h1,h2{font-family:Teko,system-ui;text-transform:uppercase;letter-spacing:.04em}

  .wrap{width:min(1100px,92%);margin:28px auto}
  .head{display:flex;align-items:end;justify-content:space-between;gap:12px;flex-wrap:wrap}
  .muted{opacity:.75}

  /* ---- Slideshow shell ---- */
  .slideshow{
    position:relative; aspect-ratio:16/9; background:#0b0b0b; border-radius:16px; overflow:hidden;
    border:1px solid rgba(255,255,255,.08);
  }

  .slide{
    position:absolute; inset:0; background:#000 center/cover no-repeat; opacity:0;
    transform:translateY(0) scale(1.02);
    will-change:opacity, transform; 
    transition:
      opacity 900ms cubic-bezier(.22,.61,.36,1),
      transform 4800ms cubic-bezier(.22,.61,.36,1);
    filter:brightness(.92);
  }
  .slide.is-active{ opacity:1; transform:translateY(0) scale(1.0) }
  /* outgoing “float off” */
  .slide.is-out{
    opacity:0; 
    transform:translateY(-12px) scale(1.03); /* floats upward a bit */
    transition:
      opacity 900ms cubic-bezier(.22,.61,.36,1),
      transform 1200ms cubic-bezier(.22,.61,.36,1);
  }

  /* gradient overlay for legibility */
  .slideshow::after{
    content:""; position:absolute; inset:0; pointer-events:none;
    background:
      radial-gradient(120% 80% at 50% 100%, rgba(0,0,0,.65) 0%, rgba(0,0,0,.2) 35%, rgba(0,0,0,.5) 90%),
      linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.75));
  }

  /* controls */
  .ctrl{
    position:absolute; top:50%; translate:0 -50%;
    width:42px; height:42px; border-radius:999px; border:1px solid rgba(255,255,255,.2);
    background:rgba(0,0,0,.4); color:#fff; display:grid; place-items:center; cursor:pointer;
    transition:transform .15s ease, background .2s ease, opacity .2s ease;
    z-index:3; backdrop-filter:blur(4px);
  }
  .ctrl:hover{ transform:scale(1.05); background:rgba(0,0,0,.55) }
  .prev{ left:10px } .next{ right:10px }

  /* dots */
  .dots{ position:absolute; left:50%; bottom:10px; translate:-50% 0; display:flex; gap:8px; z-index:3 }
  .dot{
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.35); border:0; cursor:pointer;
  }
  .dot.is-active{ background:var(--gold) }

  /* captions (optional) */
  .cap{ margin:8px 2px 0; font-size:.95rem; color:var(--muted) }

  /* mobile aspect tweak */
  @media(max-width:540px){ .slideshow{ aspect-ratio: 9/16 } }

  /* reduced motion */
  @media (prefers-reduced-motion: reduce){
    .slide, .slide.is-out{ transition:none; transform:none }
  }
</style>
</head>
<body>
  <div class="wrap">
    <h1>911 Collections</h1>
    <p class="muted"></p>

    <!-- Collection 1: Black 911 (you already have 7 images) -->
    <section class="collection"
      data-title="Black Porsche 911 Collection"
      data-folder="assets/gallery/black-911"
      data-prefix="black-911-"
      data-count="7"
      data-ext="jpg">
      <div class="head">
        <h2>Black Porsche 911 Collection</h2>
        
      </div>
      <div class="slideshow">
        <!-- slides will be injected -->
        <button class="ctrl prev" aria-label="Previous">&#10094;</button>
        <button class="ctrl next" aria-label="Next">&#10095;</button>
        <div class="dots" aria-label="Pagination"></div>
      </div>
      <p class="cap">Every curve tells a story of velocity; Built to dominate both night and track</p>
    </section>

    <!-- Collection 2: White 911 (5 photos) -->
<section class="collection"
  data-title="White Porsche 911 Collection"
  data-folder="assets/gallery/white-911"
  data-prefix="white-911-"
  data-count="5"
  data-ext="jpg">
  <div class="head">
    <h2>White Porsche 911 Collection</h2>
  </div>
  <div class="slideshow">
    <button class="ctrl prev" aria-label="Previous">&#10094;</button>
    <button class="ctrl next" aria-label="Next">&#10095;</button>
    <div class="dots" aria-label="Pagination"></div>
  </div>
  <p class="cap">A whisper of light built for thunder.</p>
</section>
    
    -->
  </div>

<script>
/* ===== Simple Carousel Builder (float-off crossfade) ===== */
function buildCarousel(section){
  const folder = section.dataset.folder;
  const prefix = section.dataset.prefix;
  const ext    = section.dataset.ext || 'jpg';
  const count  = parseInt(section.dataset.count, 10);

  const shell  = section.querySelector('.slideshow');
  const dotsEl = shell.querySelector('.dots');
  const prev   = shell.querySelector('.prev');
  const next   = shell.querySelector('.next');

  // Build slides & dots
  const slides = [];
  for(let i=1;i<=count;i++){
    const n = String(i).padStart(2,'0');
    const src = `${folder}/${prefix}${n}.${ext}`;

    const s = document.createElement('div');
    s.className = 'slide';
    // lazy: only set background when near viewport
    s.dataset.src = src;
    shell.appendChild(s);
    slides.push(s);

    const d = document.createElement('button');
    d.className = 'dot';
    d.setAttribute('aria-label', `Go to slide ${i}`);
    dotsEl.appendChild(d);
  }

  // Lazy-load with IntersectionObserver
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        slides.forEach(sl=>{
          if(!sl.style.backgroundImage && sl.dataset.src){
            const img = new Image();
            img.onload = ()=> { sl.style.backgroundImage = `url('${sl.dataset.src}')`; };
            img.src = sl.dataset.src;
          }
        });
        io.disconnect();
      }
    });
  }, { rootMargin:'200px' });
  io.observe(shell);

  let idx = 0, timer = null;
  const DURATION = 6000;    // time each slide shows
  const FADE = 900;         // must match CSS opacity

  function setActive(newIdx, direction=1){
    if(newIdx === idx) return;
    const cur = slides[idx];
    const nxt = slides[newIdx];

    // update classes for float-off effect
    cur.classList.remove('is-active');
    cur.classList.add('is-out');      // float out
    nxt.classList.add('is-active');
    nxt.classList.remove('is-out');

    // dots
    dotsEl.querySelectorAll('.dot').forEach((d,i)=>{
      d.classList.toggle('is-active', i===newIdx);
    });

    // cleanup after fade
    setTimeout(()=> cur.classList.remove('is-out'), FADE+50);
    idx = newIdx;
  }

  function go(delta){
    const nextIdx = (idx + delta + slides.length) % slides.length;
    setActive(nextIdx, Math.sign(delta));
    restart();
  }
  function autoplay(){
    timer = setInterval(()=> go(1), DURATION);
  }
  function restart(){
    clearInterval(timer); autoplay();
  }

  // Init
  slides[0].classList.add('is-active');
  dotsEl.querySelectorAll('.dot')[0]?.classList.add('is-active');
  autoplay();

  // controls
  prev.addEventListener('click', ()=> go(-1));
  next.addEventListener('click', ()=> go(1));
  dotsEl.addEventListener('click', (e)=>{
    if(e.target.classList.contains('dot')){
      const i = Array.from(dotsEl.children).indexOf(e.target);
      setActive(i); restart();
    }
  });

  // swipe (mobile)
  let sx=0, sy=0;
  shell.addEventListener('touchstart', e=>{ sx=e.touches[0].clientX; sy=e.touches[0].clientY; }, {passive:true});
  shell.addEventListener('touchend', e=>{
    const dx = e.changedTouches[0].clientX - sx;
    const dy = e.changedTouches[0].clientY - sy;
    if(Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 40){
      go(dx>0 ? -1 : 1);
    }
  }, {passive:true});

  // pause on hover (desktop)
  shell.addEventListener('mouseenter', ()=> clearInterval(timer));
  shell.addEventListener('mouseleave', ()=> restart());
}

// Build all carousels on page
document.querySelectorAll('.collection').forEach(buildCarousel);
</script>
</body>
</html>
